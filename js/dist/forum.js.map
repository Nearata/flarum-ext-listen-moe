{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@nearata/flarum-ext-listen-moe/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@nearata/flarum-ext-listen-moe/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@nearata/flarum-ext-listen-moe/./node_modules/@babel/runtime/regenerator/index.js","webpack://@nearata/flarum-ext-listen-moe/webpack/bootstrap","webpack://@nearata/flarum-ext-listen-moe/webpack/runtime/compat get default export","webpack://@nearata/flarum-ext-listen-moe/webpack/runtime/define property getters","webpack://@nearata/flarum-ext-listen-moe/webpack/runtime/hasOwnProperty shorthand","webpack://@nearata/flarum-ext-listen-moe/webpack/runtime/make namespace object","webpack://@nearata/flarum-ext-listen-moe/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@nearata/flarum-ext-listen-moe/./node_modules/external-load/index.js","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['common/components/FieldSet']\"","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['common/components/Select']\"","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['common/extend']\"","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['forum/ForumApplication']\"","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['forum/app']\"","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@nearata/flarum-ext-listen-moe/./node_modules/reconnecting-websocket/dist/reconnecting-websocket-mjs.js","webpack://@nearata/flarum-ext-listen-moe/./src/forum/index.ts"],"sourcesContent":["var _typeof = require(\"./typeof.js\")[\"default\"];\n\nfunction _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\n\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/**\n * Simple resource loader based on David Walsh's tutorial\n * https://davidwalsh.name/javascript-loader\n * https://davidwalsh.name/javascript-functions\n */\nexport default (function() {\n    // Function which returns a function\n    function _load(tag) {\n        return function(url) {\n            // This promise will be used by Promise.all to determine success or failure\n            return new Promise(function(resolve, reject) {\n                var element = document.createElement(tag);\n                var parent = \"body\";\n                var attr = \"src\";\n\n                // Important success and error for the promise\n                element.onload = function() {\n                    resolve(url);\n                };\n                element.onerror = function() {\n                    reject(url);\n                };\n\n                // Need to set different attributes depending on tag type\n                switch (tag) {\n                    case \"script\":\n                        element.async = true;\n                        break;\n                    case \"link\":\n                        element.type = \"text/css\";\n                        element.rel = \"stylesheet\";\n                        attr = \"href\";\n                        parent = \"head\";\n                }\n\n                // Inject into document to kick off loading\n                element[attr] = url;\n                document[parent].appendChild(element);\n            });\n        };\n    }\n\n    return {\n        css: _load(\"link\"),\n        js: _load(\"script\"),\n        img: _load(\"img\")\n    };\n})();\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/FieldSet'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/ForumApplication'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SettingsPage'];","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\n\nvar Event = /** @class */ (function () {\r\n    function Event(type, target) {\r\n        this.target = target;\r\n        this.type = type;\r\n    }\r\n    return Event;\r\n}());\r\nvar ErrorEvent = /** @class */ (function (_super) {\r\n    __extends(ErrorEvent, _super);\r\n    function ErrorEvent(error, target) {\r\n        var _this = _super.call(this, 'error', target) || this;\r\n        _this.message = error.message;\r\n        _this.error = error;\r\n        return _this;\r\n    }\r\n    return ErrorEvent;\r\n}(Event));\r\nvar CloseEvent = /** @class */ (function (_super) {\r\n    __extends(CloseEvent, _super);\r\n    function CloseEvent(code, reason, target) {\r\n        if (code === void 0) { code = 1000; }\r\n        if (reason === void 0) { reason = ''; }\r\n        var _this = _super.call(this, 'close', target) || this;\r\n        _this.wasClean = true;\r\n        _this.code = code;\r\n        _this.reason = reason;\r\n        return _this;\r\n    }\r\n    return CloseEvent;\r\n}(Event));\n\n/*!\r\n * Reconnecting WebSocket\r\n * by Pedro Ladaria <pedro.ladaria@gmail.com>\r\n * https://github.com/pladaria/reconnecting-websocket\r\n * License MIT\r\n */\r\nvar getGlobalWebSocket = function () {\r\n    if (typeof WebSocket !== 'undefined') {\r\n        // @ts-ignore\r\n        return WebSocket;\r\n    }\r\n};\r\n/**\r\n * Returns true if given argument looks like a WebSocket class\r\n */\r\nvar isWebSocket = function (w) { return typeof w !== 'undefined' && !!w && w.CLOSING === 2; };\r\nvar DEFAULT = {\r\n    maxReconnectionDelay: 10000,\r\n    minReconnectionDelay: 1000 + Math.random() * 4000,\r\n    minUptime: 5000,\r\n    reconnectionDelayGrowFactor: 1.3,\r\n    connectionTimeout: 4000,\r\n    maxRetries: Infinity,\r\n    maxEnqueuedMessages: Infinity,\r\n    startClosed: false,\r\n    debug: false,\r\n};\r\nvar ReconnectingWebSocket = /** @class */ (function () {\r\n    function ReconnectingWebSocket(url, protocols, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        this._listeners = {\r\n            error: [],\r\n            message: [],\r\n            open: [],\r\n            close: [],\r\n        };\r\n        this._retryCount = -1;\r\n        this._shouldReconnect = true;\r\n        this._connectLock = false;\r\n        this._binaryType = 'blob';\r\n        this._closeCalled = false;\r\n        this._messageQueue = [];\r\n        /**\r\n         * An event listener to be called when the WebSocket connection's readyState changes to CLOSED\r\n         */\r\n        this.onclose = null;\r\n        /**\r\n         * An event listener to be called when an error occurs\r\n         */\r\n        this.onerror = null;\r\n        /**\r\n         * An event listener to be called when a message is received from the server\r\n         */\r\n        this.onmessage = null;\r\n        /**\r\n         * An event listener to be called when the WebSocket connection's readyState changes to OPEN;\r\n         * this indicates that the connection is ready to send and receive data\r\n         */\r\n        this.onopen = null;\r\n        this._handleOpen = function (event) {\r\n            _this._debug('open event');\r\n            var _a = _this._options.minUptime, minUptime = _a === void 0 ? DEFAULT.minUptime : _a;\r\n            clearTimeout(_this._connectTimeout);\r\n            _this._uptimeTimeout = setTimeout(function () { return _this._acceptOpen(); }, minUptime);\r\n            _this._ws.binaryType = _this._binaryType;\r\n            // send enqueued messages (messages sent before websocket open event)\r\n            _this._messageQueue.forEach(function (message) { return _this._ws.send(message); });\r\n            _this._messageQueue = [];\r\n            if (_this.onopen) {\r\n                _this.onopen(event);\r\n            }\r\n            _this._listeners.open.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n        };\r\n        this._handleMessage = function (event) {\r\n            _this._debug('message event');\r\n            if (_this.onmessage) {\r\n                _this.onmessage(event);\r\n            }\r\n            _this._listeners.message.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n        };\r\n        this._handleError = function (event) {\r\n            _this._debug('error event', event.message);\r\n            _this._disconnect(undefined, event.message === 'TIMEOUT' ? 'timeout' : undefined);\r\n            if (_this.onerror) {\r\n                _this.onerror(event);\r\n            }\r\n            _this._debug('exec error listeners');\r\n            _this._listeners.error.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n            _this._connect();\r\n        };\r\n        this._handleClose = function (event) {\r\n            _this._debug('close event');\r\n            _this._clearTimeouts();\r\n            if (_this._shouldReconnect) {\r\n                _this._connect();\r\n            }\r\n            if (_this.onclose) {\r\n                _this.onclose(event);\r\n            }\r\n            _this._listeners.close.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n        };\r\n        this._url = url;\r\n        this._protocols = protocols;\r\n        this._options = options;\r\n        if (this._options.startClosed) {\r\n            this._shouldReconnect = false;\r\n        }\r\n        this._connect();\r\n    }\r\n    Object.defineProperty(ReconnectingWebSocket, \"CONNECTING\", {\r\n        get: function () {\r\n            return 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket, \"OPEN\", {\r\n        get: function () {\r\n            return 1;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket, \"CLOSING\", {\r\n        get: function () {\r\n            return 2;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket, \"CLOSED\", {\r\n        get: function () {\r\n            return 3;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"CONNECTING\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.CONNECTING;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"OPEN\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.OPEN;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"CLOSING\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.CLOSING;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"CLOSED\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.CLOSED;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"binaryType\", {\r\n        get: function () {\r\n            return this._ws ? this._ws.binaryType : this._binaryType;\r\n        },\r\n        set: function (value) {\r\n            this._binaryType = value;\r\n            if (this._ws) {\r\n                this._ws.binaryType = value;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"retryCount\", {\r\n        /**\r\n         * Returns the number or connection retries\r\n         */\r\n        get: function () {\r\n            return Math.max(this._retryCount, 0);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"bufferedAmount\", {\r\n        /**\r\n         * The number of bytes of data that have been queued using calls to send() but not yet\r\n         * transmitted to the network. This value resets to zero once all queued data has been sent.\r\n         * This value does not reset to zero when the connection is closed; if you keep calling send(),\r\n         * this will continue to climb. Read only\r\n         */\r\n        get: function () {\r\n            var bytes = this._messageQueue.reduce(function (acc, message) {\r\n                if (typeof message === 'string') {\r\n                    acc += message.length; // not byte size\r\n                }\r\n                else if (message instanceof Blob) {\r\n                    acc += message.size;\r\n                }\r\n                else {\r\n                    acc += message.byteLength;\r\n                }\r\n                return acc;\r\n            }, 0);\r\n            return bytes + (this._ws ? this._ws.bufferedAmount : 0);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"extensions\", {\r\n        /**\r\n         * The extensions selected by the server. This is currently only the empty string or a list of\r\n         * extensions as negotiated by the connection\r\n         */\r\n        get: function () {\r\n            return this._ws ? this._ws.extensions : '';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"protocol\", {\r\n        /**\r\n         * A string indicating the name of the sub-protocol the server selected;\r\n         * this will be one of the strings specified in the protocols parameter when creating the\r\n         * WebSocket object\r\n         */\r\n        get: function () {\r\n            return this._ws ? this._ws.protocol : '';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"readyState\", {\r\n        /**\r\n         * The current state of the connection; this is one of the Ready state constants\r\n         */\r\n        get: function () {\r\n            if (this._ws) {\r\n                return this._ws.readyState;\r\n            }\r\n            return this._options.startClosed\r\n                ? ReconnectingWebSocket.CLOSED\r\n                : ReconnectingWebSocket.CONNECTING;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"url\", {\r\n        /**\r\n         * The URL as resolved by the constructor\r\n         */\r\n        get: function () {\r\n            return this._ws ? this._ws.url : '';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Closes the WebSocket connection or connection attempt, if any. If the connection is already\r\n     * CLOSED, this method does nothing\r\n     */\r\n    ReconnectingWebSocket.prototype.close = function (code, reason) {\r\n        if (code === void 0) { code = 1000; }\r\n        this._closeCalled = true;\r\n        this._shouldReconnect = false;\r\n        this._clearTimeouts();\r\n        if (!this._ws) {\r\n            this._debug('close enqueued: no ws instance');\r\n            return;\r\n        }\r\n        if (this._ws.readyState === this.CLOSED) {\r\n            this._debug('close: already closed');\r\n            return;\r\n        }\r\n        this._ws.close(code, reason);\r\n    };\r\n    /**\r\n     * Closes the WebSocket connection or connection attempt and connects again.\r\n     * Resets retry counter;\r\n     */\r\n    ReconnectingWebSocket.prototype.reconnect = function (code, reason) {\r\n        this._shouldReconnect = true;\r\n        this._closeCalled = false;\r\n        this._retryCount = -1;\r\n        if (!this._ws || this._ws.readyState === this.CLOSED) {\r\n            this._connect();\r\n        }\r\n        else {\r\n            this._disconnect(code, reason);\r\n            this._connect();\r\n        }\r\n    };\r\n    /**\r\n     * Enqueue specified data to be transmitted to the server over the WebSocket connection\r\n     */\r\n    ReconnectingWebSocket.prototype.send = function (data) {\r\n        if (this._ws && this._ws.readyState === this.OPEN) {\r\n            this._debug('send', data);\r\n            this._ws.send(data);\r\n        }\r\n        else {\r\n            var _a = this._options.maxEnqueuedMessages, maxEnqueuedMessages = _a === void 0 ? DEFAULT.maxEnqueuedMessages : _a;\r\n            if (this._messageQueue.length < maxEnqueuedMessages) {\r\n                this._debug('enqueue', data);\r\n                this._messageQueue.push(data);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Register an event handler of a specific event type\r\n     */\r\n    ReconnectingWebSocket.prototype.addEventListener = function (type, listener) {\r\n        if (this._listeners[type]) {\r\n            // @ts-ignore\r\n            this._listeners[type].push(listener);\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype.dispatchEvent = function (event) {\r\n        var e_1, _a;\r\n        var listeners = this._listeners[event.type];\r\n        if (listeners) {\r\n            try {\r\n                for (var listeners_1 = __values(listeners), listeners_1_1 = listeners_1.next(); !listeners_1_1.done; listeners_1_1 = listeners_1.next()) {\r\n                    var listener = listeners_1_1.value;\r\n                    this._callEventListener(event, listener);\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (listeners_1_1 && !listeners_1_1.done && (_a = listeners_1.return)) _a.call(listeners_1);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * Removes an event listener\r\n     */\r\n    ReconnectingWebSocket.prototype.removeEventListener = function (type, listener) {\r\n        if (this._listeners[type]) {\r\n            // @ts-ignore\r\n            this._listeners[type] = this._listeners[type].filter(function (l) { return l !== listener; });\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._debug = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (this._options.debug) {\r\n            // not using spread because compiled version uses Symbols\r\n            // tslint:disable-next-line\r\n            console.log.apply(console, __spread(['RWS>'], args));\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._getNextDelay = function () {\r\n        var _a = this._options, _b = _a.reconnectionDelayGrowFactor, reconnectionDelayGrowFactor = _b === void 0 ? DEFAULT.reconnectionDelayGrowFactor : _b, _c = _a.minReconnectionDelay, minReconnectionDelay = _c === void 0 ? DEFAULT.minReconnectionDelay : _c, _d = _a.maxReconnectionDelay, maxReconnectionDelay = _d === void 0 ? DEFAULT.maxReconnectionDelay : _d;\r\n        var delay = 0;\r\n        if (this._retryCount > 0) {\r\n            delay =\r\n                minReconnectionDelay * Math.pow(reconnectionDelayGrowFactor, this._retryCount - 1);\r\n            if (delay > maxReconnectionDelay) {\r\n                delay = maxReconnectionDelay;\r\n            }\r\n        }\r\n        this._debug('next delay', delay);\r\n        return delay;\r\n    };\r\n    ReconnectingWebSocket.prototype._wait = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            setTimeout(resolve, _this._getNextDelay());\r\n        });\r\n    };\r\n    ReconnectingWebSocket.prototype._getNextUrl = function (urlProvider) {\r\n        if (typeof urlProvider === 'string') {\r\n            return Promise.resolve(urlProvider);\r\n        }\r\n        if (typeof urlProvider === 'function') {\r\n            var url = urlProvider();\r\n            if (typeof url === 'string') {\r\n                return Promise.resolve(url);\r\n            }\r\n            if (!!url.then) {\r\n                return url;\r\n            }\r\n        }\r\n        throw Error('Invalid URL');\r\n    };\r\n    ReconnectingWebSocket.prototype._connect = function () {\r\n        var _this = this;\r\n        if (this._connectLock || !this._shouldReconnect) {\r\n            return;\r\n        }\r\n        this._connectLock = true;\r\n        var _a = this._options, _b = _a.maxRetries, maxRetries = _b === void 0 ? DEFAULT.maxRetries : _b, _c = _a.connectionTimeout, connectionTimeout = _c === void 0 ? DEFAULT.connectionTimeout : _c, _d = _a.WebSocket, WebSocket = _d === void 0 ? getGlobalWebSocket() : _d;\r\n        if (this._retryCount >= maxRetries) {\r\n            this._debug('max retries reached', this._retryCount, '>=', maxRetries);\r\n            return;\r\n        }\r\n        this._retryCount++;\r\n        this._debug('connect', this._retryCount);\r\n        this._removeListeners();\r\n        if (!isWebSocket(WebSocket)) {\r\n            throw Error('No valid WebSocket class provided');\r\n        }\r\n        this._wait()\r\n            .then(function () { return _this._getNextUrl(_this._url); })\r\n            .then(function (url) {\r\n            // close could be called before creating the ws\r\n            if (_this._closeCalled) {\r\n                return;\r\n            }\r\n            _this._debug('connect', { url: url, protocols: _this._protocols });\r\n            _this._ws = _this._protocols\r\n                ? new WebSocket(url, _this._protocols)\r\n                : new WebSocket(url);\r\n            _this._ws.binaryType = _this._binaryType;\r\n            _this._connectLock = false;\r\n            _this._addListeners();\r\n            _this._connectTimeout = setTimeout(function () { return _this._handleTimeout(); }, connectionTimeout);\r\n        });\r\n    };\r\n    ReconnectingWebSocket.prototype._handleTimeout = function () {\r\n        this._debug('timeout event');\r\n        this._handleError(new ErrorEvent(Error('TIMEOUT'), this));\r\n    };\r\n    ReconnectingWebSocket.prototype._disconnect = function (code, reason) {\r\n        if (code === void 0) { code = 1000; }\r\n        this._clearTimeouts();\r\n        if (!this._ws) {\r\n            return;\r\n        }\r\n        this._removeListeners();\r\n        try {\r\n            this._ws.close(code, reason);\r\n            this._handleClose(new CloseEvent(code, reason, this));\r\n        }\r\n        catch (error) {\r\n            // ignore\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._acceptOpen = function () {\r\n        this._debug('accept open');\r\n        this._retryCount = 0;\r\n    };\r\n    ReconnectingWebSocket.prototype._callEventListener = function (event, listener) {\r\n        if ('handleEvent' in listener) {\r\n            // @ts-ignore\r\n            listener.handleEvent(event);\r\n        }\r\n        else {\r\n            // @ts-ignore\r\n            listener(event);\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._removeListeners = function () {\r\n        if (!this._ws) {\r\n            return;\r\n        }\r\n        this._debug('removeListeners');\r\n        this._ws.removeEventListener('open', this._handleOpen);\r\n        this._ws.removeEventListener('close', this._handleClose);\r\n        this._ws.removeEventListener('message', this._handleMessage);\r\n        // @ts-ignore\r\n        this._ws.removeEventListener('error', this._handleError);\r\n    };\r\n    ReconnectingWebSocket.prototype._addListeners = function () {\r\n        if (!this._ws) {\r\n            return;\r\n        }\r\n        this._debug('addListeners');\r\n        this._ws.addEventListener('open', this._handleOpen);\r\n        this._ws.addEventListener('close', this._handleClose);\r\n        this._ws.addEventListener('message', this._handleMessage);\r\n        // @ts-ignore\r\n        this._ws.addEventListener('error', this._handleError);\r\n    };\r\n    ReconnectingWebSocket.prototype._clearTimeouts = function () {\r\n        clearTimeout(this._connectTimeout);\r\n        clearTimeout(this._uptimeTimeout);\r\n    };\r\n    return ReconnectingWebSocket;\r\n}());\n\nexport default ReconnectingWebSocket;\n","import load from \"external-load\";\nimport FieldSet from \"flarum/common/components/FieldSet\";\nimport Select from \"flarum/common/components/Select\";\nimport { extend } from \"flarum/common/extend\";\nimport ForumApplication from \"flarum/forum/ForumApplication\";\nimport app from \"flarum/forum/app\";\nimport SettingsPage from \"flarum/forum/components/SettingsPage\";\nimport ReconnectingWebSocket from \"reconnecting-websocket\";\n\nlet loaded = false;\nconst addResources = async () => {\n    if (loaded) {\n        return;\n    }\n\n    await load.css(\n        \"https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.css\"\n    );\n\n    await load.js(\n        \"https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.js\"\n    );\n\n    loaded = true;\n};\n\nconst radio = {\n    jpop: {\n        audioUrl: \"https://listen.moe/stream\",\n        wsUrl: \"wss://listen.moe/gateway_v2\",\n    },\n    kpop: {\n        audioUrl: \"https://listen.moe/kpop/stream\",\n        wsUrl: \"wss://listen.moe/kpop/gateway_v2\",\n    },\n};\n\nconst getCover = (fileName: string) => {\n    return `https://cdn.listen.moe/covers/${fileName}`;\n};\n\nconst websocket = (audioUrl: string, wsUrl) => {\n    let heartbeatInterval;\n\n    const heartbeat = (interval) => {\n        heartbeatInterval = setInterval(() => {\n            app.listenMoe.websocket.send(JSON.stringify({ op: 9 }));\n        }, interval);\n    };\n\n    app.listenMoe.websocket = new ReconnectingWebSocket(wsUrl, [], {\n        connectionTimeout: 5000,\n    });\n\n    app.listenMoe.websocket.onopen = () => {\n        clearInterval(heartbeatInterval);\n        heartbeatInterval = null;\n    };\n\n    app.listenMoe.websocket.onmessage = (message) => {\n        if (!message.data.length) {\n            return;\n        }\n\n        let response;\n\n        try {\n            response = JSON.parse(message.data);\n        } catch (error) {\n            return;\n        }\n\n        if (response.op === 0) {\n            app.listenMoe.websocket.send(JSON.stringify({ op: 9 }));\n            heartbeat(response.d.heartbeat);\n        }\n\n        if (response.op === 1) {\n            const valids = [\n                \"TRACK_UPDATE\",\n                \"TRACK_UPDATE_REQUEST\",\n                \"QUEUE_UPDATE\",\n                \"NOTIFICATION\",\n            ];\n\n            if (valids.indexOf(response.t) === -1) {\n                return;\n            }\n\n            const res = response.d;\n\n            const artists = res.song.artists.map((e) => e.name).join(\", \");\n            const albums = res.song.albums;\n            const cover =\n                albums.length > 0 && albums[0].image !== null\n                    ? getCover(albums[0].image)\n                    : app.forum.attribute(\"blankUrl\");\n            const sources = res.song.sources\n                .map((e) => e.nameRomaji)\n                .join(\", \");\n\n            const songTitle = res.song.title;\n            const artistsFinal = !!sources\n                ? `${artists} [${sources}]`\n                : artists;\n\n            document.body\n                .querySelector(\".aplayer-title\")\n                .setAttribute(\"title\", `${songTitle} ${artistsFinal}`);\n\n            const reload = () => {\n                app.listenMoe.player.list.add({\n                    name: songTitle,\n                    artist: artistsFinal,\n                    url: audioUrl,\n                    cover: cover,\n                });\n\n                app.listenMoe.player.list.switch(1);\n                app.listenMoe.player.list.remove(0);\n            };\n\n            reload();\n\n            app.listenMoe.player.on(\"pause\", () => {\n                // This way the seek is always synced with the API\n                reload();\n            });\n        }\n    };\n\n    app.listenMoe.websocket.onclose = () => {\n        clearInterval(heartbeatInterval);\n        heartbeatInterval = null;\n    };\n};\n\napp.initializers.add(\"nearata-listen-moe\", () => {\n    app.listenMoe = {};\n\n    extend(ForumApplication.prototype, \"mount\", function () {\n        const allowGuests = app.forum.attribute(\"listenMoeRadioGuests\");\n        const user = app.session.user;\n\n        if (!user && !allowGuests) {\n            return;\n        }\n\n        const key = !!user\n            ? user.preferences().listenMoeRadioType\n            : app.forum.attribute(\"listenMoeRadioType\");\n        const audioUrl = radio[key][\"audioUrl\"];\n        const wsUrl = radio[key][\"wsUrl\"];\n\n        addResources().then(() => {\n            const container = document.createElement(\"div\");\n            container.id = \"nearata-listen-moe\";\n\n            document.body.prepend(container);\n\n            app.listenMoe.player = new APlayer({\n                container: container,\n                fixed: true,\n                theme: \"#FF015B\",\n                loop: \"none\",\n                preload: \"metadata\",\n                volume: 0.5,\n                audio: {\n                    name: \"&nbsp;\",\n                    artist: \"&nbsp;\",\n                    url: audioUrl,\n                },\n            });\n\n            websocket(audioUrl, wsUrl);\n        });\n    });\n\n    extend(SettingsPage.prototype, \"settingsItems\", function (items) {\n        const user = app.session.user;\n        const currentRadio = user.preferences().listenMoeRadioType;\n\n        items.add(\n            \"listenMoeRadioType\",\n            m(\n                FieldSet,\n                {\n                    label: app.translator.trans(\n                        \"nearata-listen-moe.forum.settings.radio_label\"\n                    ),\n                    class: \"Settings-theme\",\n                },\n                [\n                    m(Select, {\n                        class: \"Settings-theme--input\",\n                        value: currentRadio,\n                        options: {\n                            jpop: app.translator.trans(\n                                \"nearata-listen-moe.forum.settings.radio_options.jpop\"\n                            ),\n                            kpop: app.translator.trans(\n                                \"nearata-listen-moe.forum.settings.radio_options.kpop\"\n                            ),\n                        },\n                        onchange: (value: string) => {\n                            user.savePreferences({\n                                listenMoeRadioType: value,\n                            }).then(() => location.reload());\n                        },\n                    }),\n                ]\n            )\n        );\n    });\n});\n"],"names":["_typeof","require","_regeneratorRuntime","module","exports","__esModule","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","Error","undefined","done","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","get","prop","r","asyncGeneratorStep","gen","_next","_throw","_load","tag","url","element","document","createElement","parent","attr","onload","onerror","rel","appendChild","css","js","img","flarum","core","compat","extendStatics","b","Array","p","__extends","__","__read","m","e","ar","__spread","arguments","concat","Event","target","ErrorEvent","_super","_this","message","CloseEvent","code","reason","wasClean","getGlobalWebSocket","WebSocket","DEFAULT","maxReconnectionDelay","minReconnectionDelay","Math","random","minUptime","reconnectionDelayGrowFactor","connectionTimeout","maxRetries","Infinity","maxEnqueuedMessages","startClosed","debug","ReconnectingWebSocket","protocols","options","_listeners","open","close","_retryCount","_shouldReconnect","_connectLock","_binaryType","_closeCalled","_messageQueue","onclose","onmessage","onopen","_handleOpen","event","_debug","_a","_options","clearTimeout","_connectTimeout","_uptimeTimeout","setTimeout","_acceptOpen","_ws","binaryType","send","listener","_callEventListener","_handleMessage","_handleError","_disconnect","_connect","_handleClose","_clearTimeouts","_url","_protocols","CONNECTING","OPEN","CLOSING","CLOSED","set","max","reduce","acc","Blob","size","byteLength","bufferedAmount","extensions","protocol","readyState","reconnect","data","addEventListener","dispatchEvent","e_1","listeners","listeners_1","__values","listeners_1_1","e_1_1","removeEventListener","filter","l","args","_i","console","log","apply","_getNextDelay","_b","_c","_d","delay","pow","_wait","_getNextUrl","urlProvider","_removeListeners","w","_addListeners","_handleTimeout","handleEvent","loaded","addResources","load","radio","jpop","audioUrl","wsUrl","kpop","app","extend","ForumApplication","allowGuests","user","preferences","listenMoeRadioType","container","id","body","prepend","APlayer","fixed","theme","loop","preload","volume","audio","artist","heartbeatInterval","clearInterval","response","interval","JSON","parse","op","stringify","heartbeat","setInterval","indexOf","t","res","artists","song","map","join","albums","cover","image","sources","nameRomaji","songTitle","title","artistsFinal","querySelector","setAttribute","reload","websocket","SettingsPage","items","currentRadio","add","FieldSet","label","class","Select","onchange","savePreferences","location"],"sourceRoot":""}