{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@nearata/flarum-ext-listen-moe/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@nearata/flarum-ext-listen-moe/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@nearata/flarum-ext-listen-moe/./node_modules/@babel/runtime/regenerator/index.js","webpack://@nearata/flarum-ext-listen-moe/webpack/bootstrap","webpack://@nearata/flarum-ext-listen-moe/webpack/runtime/compat get default export","webpack://@nearata/flarum-ext-listen-moe/webpack/runtime/define property getters","webpack://@nearata/flarum-ext-listen-moe/webpack/runtime/hasOwnProperty shorthand","webpack://@nearata/flarum-ext-listen-moe/webpack/runtime/make namespace object","webpack://@nearata/flarum-ext-listen-moe/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@nearata/flarum-ext-listen-moe/./node_modules/external-load/index.js","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['common/components/FieldSet']\"","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['common/components/Select']\"","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['common/extend']\"","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['forum/ForumApplication']\"","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['forum/app']\"","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@nearata/flarum-ext-listen-moe/./node_modules/reconnecting-websocket/dist/reconnecting-websocket-mjs.js","webpack://@nearata/flarum-ext-listen-moe/./src/forum/index.ts"],"sourcesContent":["var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function value(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","/**\n * Simple resource loader based on David Walsh's tutorial\n * https://davidwalsh.name/javascript-loader\n * https://davidwalsh.name/javascript-functions\n */\nexport default (function() {\n    // Function which returns a function\n    function _load(tag) {\n        return function(url) {\n            // This promise will be used by Promise.all to determine success or failure\n            return new Promise(function(resolve, reject) {\n                var element = document.createElement(tag);\n                var parent = \"body\";\n                var attr = \"src\";\n\n                // Important success and error for the promise\n                element.onload = function() {\n                    resolve(url);\n                };\n                element.onerror = function() {\n                    reject(url);\n                };\n\n                // Need to set different attributes depending on tag type\n                switch (tag) {\n                    case \"script\":\n                        element.async = true;\n                        break;\n                    case \"link\":\n                        element.type = \"text/css\";\n                        element.rel = \"stylesheet\";\n                        attr = \"href\";\n                        parent = \"head\";\n                }\n\n                // Inject into document to kick off loading\n                element[attr] = url;\n                document[parent].appendChild(element);\n            });\n        };\n    }\n\n    return {\n        css: _load(\"link\"),\n        js: _load(\"script\"),\n        img: _load(\"img\")\n    };\n})();\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/FieldSet'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/ForumApplication'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SettingsPage'];","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\n\nvar Event = /** @class */ (function () {\r\n    function Event(type, target) {\r\n        this.target = target;\r\n        this.type = type;\r\n    }\r\n    return Event;\r\n}());\r\nvar ErrorEvent = /** @class */ (function (_super) {\r\n    __extends(ErrorEvent, _super);\r\n    function ErrorEvent(error, target) {\r\n        var _this = _super.call(this, 'error', target) || this;\r\n        _this.message = error.message;\r\n        _this.error = error;\r\n        return _this;\r\n    }\r\n    return ErrorEvent;\r\n}(Event));\r\nvar CloseEvent = /** @class */ (function (_super) {\r\n    __extends(CloseEvent, _super);\r\n    function CloseEvent(code, reason, target) {\r\n        if (code === void 0) { code = 1000; }\r\n        if (reason === void 0) { reason = ''; }\r\n        var _this = _super.call(this, 'close', target) || this;\r\n        _this.wasClean = true;\r\n        _this.code = code;\r\n        _this.reason = reason;\r\n        return _this;\r\n    }\r\n    return CloseEvent;\r\n}(Event));\n\n/*!\r\n * Reconnecting WebSocket\r\n * by Pedro Ladaria <pedro.ladaria@gmail.com>\r\n * https://github.com/pladaria/reconnecting-websocket\r\n * License MIT\r\n */\r\nvar getGlobalWebSocket = function () {\r\n    if (typeof WebSocket !== 'undefined') {\r\n        // @ts-ignore\r\n        return WebSocket;\r\n    }\r\n};\r\n/**\r\n * Returns true if given argument looks like a WebSocket class\r\n */\r\nvar isWebSocket = function (w) { return typeof w !== 'undefined' && !!w && w.CLOSING === 2; };\r\nvar DEFAULT = {\r\n    maxReconnectionDelay: 10000,\r\n    minReconnectionDelay: 1000 + Math.random() * 4000,\r\n    minUptime: 5000,\r\n    reconnectionDelayGrowFactor: 1.3,\r\n    connectionTimeout: 4000,\r\n    maxRetries: Infinity,\r\n    maxEnqueuedMessages: Infinity,\r\n    startClosed: false,\r\n    debug: false,\r\n};\r\nvar ReconnectingWebSocket = /** @class */ (function () {\r\n    function ReconnectingWebSocket(url, protocols, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        this._listeners = {\r\n            error: [],\r\n            message: [],\r\n            open: [],\r\n            close: [],\r\n        };\r\n        this._retryCount = -1;\r\n        this._shouldReconnect = true;\r\n        this._connectLock = false;\r\n        this._binaryType = 'blob';\r\n        this._closeCalled = false;\r\n        this._messageQueue = [];\r\n        /**\r\n         * An event listener to be called when the WebSocket connection's readyState changes to CLOSED\r\n         */\r\n        this.onclose = null;\r\n        /**\r\n         * An event listener to be called when an error occurs\r\n         */\r\n        this.onerror = null;\r\n        /**\r\n         * An event listener to be called when a message is received from the server\r\n         */\r\n        this.onmessage = null;\r\n        /**\r\n         * An event listener to be called when the WebSocket connection's readyState changes to OPEN;\r\n         * this indicates that the connection is ready to send and receive data\r\n         */\r\n        this.onopen = null;\r\n        this._handleOpen = function (event) {\r\n            _this._debug('open event');\r\n            var _a = _this._options.minUptime, minUptime = _a === void 0 ? DEFAULT.minUptime : _a;\r\n            clearTimeout(_this._connectTimeout);\r\n            _this._uptimeTimeout = setTimeout(function () { return _this._acceptOpen(); }, minUptime);\r\n            _this._ws.binaryType = _this._binaryType;\r\n            // send enqueued messages (messages sent before websocket open event)\r\n            _this._messageQueue.forEach(function (message) { return _this._ws.send(message); });\r\n            _this._messageQueue = [];\r\n            if (_this.onopen) {\r\n                _this.onopen(event);\r\n            }\r\n            _this._listeners.open.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n        };\r\n        this._handleMessage = function (event) {\r\n            _this._debug('message event');\r\n            if (_this.onmessage) {\r\n                _this.onmessage(event);\r\n            }\r\n            _this._listeners.message.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n        };\r\n        this._handleError = function (event) {\r\n            _this._debug('error event', event.message);\r\n            _this._disconnect(undefined, event.message === 'TIMEOUT' ? 'timeout' : undefined);\r\n            if (_this.onerror) {\r\n                _this.onerror(event);\r\n            }\r\n            _this._debug('exec error listeners');\r\n            _this._listeners.error.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n            _this._connect();\r\n        };\r\n        this._handleClose = function (event) {\r\n            _this._debug('close event');\r\n            _this._clearTimeouts();\r\n            if (_this._shouldReconnect) {\r\n                _this._connect();\r\n            }\r\n            if (_this.onclose) {\r\n                _this.onclose(event);\r\n            }\r\n            _this._listeners.close.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n        };\r\n        this._url = url;\r\n        this._protocols = protocols;\r\n        this._options = options;\r\n        if (this._options.startClosed) {\r\n            this._shouldReconnect = false;\r\n        }\r\n        this._connect();\r\n    }\r\n    Object.defineProperty(ReconnectingWebSocket, \"CONNECTING\", {\r\n        get: function () {\r\n            return 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket, \"OPEN\", {\r\n        get: function () {\r\n            return 1;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket, \"CLOSING\", {\r\n        get: function () {\r\n            return 2;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket, \"CLOSED\", {\r\n        get: function () {\r\n            return 3;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"CONNECTING\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.CONNECTING;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"OPEN\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.OPEN;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"CLOSING\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.CLOSING;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"CLOSED\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.CLOSED;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"binaryType\", {\r\n        get: function () {\r\n            return this._ws ? this._ws.binaryType : this._binaryType;\r\n        },\r\n        set: function (value) {\r\n            this._binaryType = value;\r\n            if (this._ws) {\r\n                this._ws.binaryType = value;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"retryCount\", {\r\n        /**\r\n         * Returns the number or connection retries\r\n         */\r\n        get: function () {\r\n            return Math.max(this._retryCount, 0);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"bufferedAmount\", {\r\n        /**\r\n         * The number of bytes of data that have been queued using calls to send() but not yet\r\n         * transmitted to the network. This value resets to zero once all queued data has been sent.\r\n         * This value does not reset to zero when the connection is closed; if you keep calling send(),\r\n         * this will continue to climb. Read only\r\n         */\r\n        get: function () {\r\n            var bytes = this._messageQueue.reduce(function (acc, message) {\r\n                if (typeof message === 'string') {\r\n                    acc += message.length; // not byte size\r\n                }\r\n                else if (message instanceof Blob) {\r\n                    acc += message.size;\r\n                }\r\n                else {\r\n                    acc += message.byteLength;\r\n                }\r\n                return acc;\r\n            }, 0);\r\n            return bytes + (this._ws ? this._ws.bufferedAmount : 0);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"extensions\", {\r\n        /**\r\n         * The extensions selected by the server. This is currently only the empty string or a list of\r\n         * extensions as negotiated by the connection\r\n         */\r\n        get: function () {\r\n            return this._ws ? this._ws.extensions : '';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"protocol\", {\r\n        /**\r\n         * A string indicating the name of the sub-protocol the server selected;\r\n         * this will be one of the strings specified in the protocols parameter when creating the\r\n         * WebSocket object\r\n         */\r\n        get: function () {\r\n            return this._ws ? this._ws.protocol : '';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"readyState\", {\r\n        /**\r\n         * The current state of the connection; this is one of the Ready state constants\r\n         */\r\n        get: function () {\r\n            if (this._ws) {\r\n                return this._ws.readyState;\r\n            }\r\n            return this._options.startClosed\r\n                ? ReconnectingWebSocket.CLOSED\r\n                : ReconnectingWebSocket.CONNECTING;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"url\", {\r\n        /**\r\n         * The URL as resolved by the constructor\r\n         */\r\n        get: function () {\r\n            return this._ws ? this._ws.url : '';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Closes the WebSocket connection or connection attempt, if any. If the connection is already\r\n     * CLOSED, this method does nothing\r\n     */\r\n    ReconnectingWebSocket.prototype.close = function (code, reason) {\r\n        if (code === void 0) { code = 1000; }\r\n        this._closeCalled = true;\r\n        this._shouldReconnect = false;\r\n        this._clearTimeouts();\r\n        if (!this._ws) {\r\n            this._debug('close enqueued: no ws instance');\r\n            return;\r\n        }\r\n        if (this._ws.readyState === this.CLOSED) {\r\n            this._debug('close: already closed');\r\n            return;\r\n        }\r\n        this._ws.close(code, reason);\r\n    };\r\n    /**\r\n     * Closes the WebSocket connection or connection attempt and connects again.\r\n     * Resets retry counter;\r\n     */\r\n    ReconnectingWebSocket.prototype.reconnect = function (code, reason) {\r\n        this._shouldReconnect = true;\r\n        this._closeCalled = false;\r\n        this._retryCount = -1;\r\n        if (!this._ws || this._ws.readyState === this.CLOSED) {\r\n            this._connect();\r\n        }\r\n        else {\r\n            this._disconnect(code, reason);\r\n            this._connect();\r\n        }\r\n    };\r\n    /**\r\n     * Enqueue specified data to be transmitted to the server over the WebSocket connection\r\n     */\r\n    ReconnectingWebSocket.prototype.send = function (data) {\r\n        if (this._ws && this._ws.readyState === this.OPEN) {\r\n            this._debug('send', data);\r\n            this._ws.send(data);\r\n        }\r\n        else {\r\n            var _a = this._options.maxEnqueuedMessages, maxEnqueuedMessages = _a === void 0 ? DEFAULT.maxEnqueuedMessages : _a;\r\n            if (this._messageQueue.length < maxEnqueuedMessages) {\r\n                this._debug('enqueue', data);\r\n                this._messageQueue.push(data);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Register an event handler of a specific event type\r\n     */\r\n    ReconnectingWebSocket.prototype.addEventListener = function (type, listener) {\r\n        if (this._listeners[type]) {\r\n            // @ts-ignore\r\n            this._listeners[type].push(listener);\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype.dispatchEvent = function (event) {\r\n        var e_1, _a;\r\n        var listeners = this._listeners[event.type];\r\n        if (listeners) {\r\n            try {\r\n                for (var listeners_1 = __values(listeners), listeners_1_1 = listeners_1.next(); !listeners_1_1.done; listeners_1_1 = listeners_1.next()) {\r\n                    var listener = listeners_1_1.value;\r\n                    this._callEventListener(event, listener);\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (listeners_1_1 && !listeners_1_1.done && (_a = listeners_1.return)) _a.call(listeners_1);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * Removes an event listener\r\n     */\r\n    ReconnectingWebSocket.prototype.removeEventListener = function (type, listener) {\r\n        if (this._listeners[type]) {\r\n            // @ts-ignore\r\n            this._listeners[type] = this._listeners[type].filter(function (l) { return l !== listener; });\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._debug = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (this._options.debug) {\r\n            // not using spread because compiled version uses Symbols\r\n            // tslint:disable-next-line\r\n            console.log.apply(console, __spread(['RWS>'], args));\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._getNextDelay = function () {\r\n        var _a = this._options, _b = _a.reconnectionDelayGrowFactor, reconnectionDelayGrowFactor = _b === void 0 ? DEFAULT.reconnectionDelayGrowFactor : _b, _c = _a.minReconnectionDelay, minReconnectionDelay = _c === void 0 ? DEFAULT.minReconnectionDelay : _c, _d = _a.maxReconnectionDelay, maxReconnectionDelay = _d === void 0 ? DEFAULT.maxReconnectionDelay : _d;\r\n        var delay = 0;\r\n        if (this._retryCount > 0) {\r\n            delay =\r\n                minReconnectionDelay * Math.pow(reconnectionDelayGrowFactor, this._retryCount - 1);\r\n            if (delay > maxReconnectionDelay) {\r\n                delay = maxReconnectionDelay;\r\n            }\r\n        }\r\n        this._debug('next delay', delay);\r\n        return delay;\r\n    };\r\n    ReconnectingWebSocket.prototype._wait = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            setTimeout(resolve, _this._getNextDelay());\r\n        });\r\n    };\r\n    ReconnectingWebSocket.prototype._getNextUrl = function (urlProvider) {\r\n        if (typeof urlProvider === 'string') {\r\n            return Promise.resolve(urlProvider);\r\n        }\r\n        if (typeof urlProvider === 'function') {\r\n            var url = urlProvider();\r\n            if (typeof url === 'string') {\r\n                return Promise.resolve(url);\r\n            }\r\n            if (!!url.then) {\r\n                return url;\r\n            }\r\n        }\r\n        throw Error('Invalid URL');\r\n    };\r\n    ReconnectingWebSocket.prototype._connect = function () {\r\n        var _this = this;\r\n        if (this._connectLock || !this._shouldReconnect) {\r\n            return;\r\n        }\r\n        this._connectLock = true;\r\n        var _a = this._options, _b = _a.maxRetries, maxRetries = _b === void 0 ? DEFAULT.maxRetries : _b, _c = _a.connectionTimeout, connectionTimeout = _c === void 0 ? DEFAULT.connectionTimeout : _c, _d = _a.WebSocket, WebSocket = _d === void 0 ? getGlobalWebSocket() : _d;\r\n        if (this._retryCount >= maxRetries) {\r\n            this._debug('max retries reached', this._retryCount, '>=', maxRetries);\r\n            return;\r\n        }\r\n        this._retryCount++;\r\n        this._debug('connect', this._retryCount);\r\n        this._removeListeners();\r\n        if (!isWebSocket(WebSocket)) {\r\n            throw Error('No valid WebSocket class provided');\r\n        }\r\n        this._wait()\r\n            .then(function () { return _this._getNextUrl(_this._url); })\r\n            .then(function (url) {\r\n            // close could be called before creating the ws\r\n            if (_this._closeCalled) {\r\n                return;\r\n            }\r\n            _this._debug('connect', { url: url, protocols: _this._protocols });\r\n            _this._ws = _this._protocols\r\n                ? new WebSocket(url, _this._protocols)\r\n                : new WebSocket(url);\r\n            _this._ws.binaryType = _this._binaryType;\r\n            _this._connectLock = false;\r\n            _this._addListeners();\r\n            _this._connectTimeout = setTimeout(function () { return _this._handleTimeout(); }, connectionTimeout);\r\n        });\r\n    };\r\n    ReconnectingWebSocket.prototype._handleTimeout = function () {\r\n        this._debug('timeout event');\r\n        this._handleError(new ErrorEvent(Error('TIMEOUT'), this));\r\n    };\r\n    ReconnectingWebSocket.prototype._disconnect = function (code, reason) {\r\n        if (code === void 0) { code = 1000; }\r\n        this._clearTimeouts();\r\n        if (!this._ws) {\r\n            return;\r\n        }\r\n        this._removeListeners();\r\n        try {\r\n            this._ws.close(code, reason);\r\n            this._handleClose(new CloseEvent(code, reason, this));\r\n        }\r\n        catch (error) {\r\n            // ignore\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._acceptOpen = function () {\r\n        this._debug('accept open');\r\n        this._retryCount = 0;\r\n    };\r\n    ReconnectingWebSocket.prototype._callEventListener = function (event, listener) {\r\n        if ('handleEvent' in listener) {\r\n            // @ts-ignore\r\n            listener.handleEvent(event);\r\n        }\r\n        else {\r\n            // @ts-ignore\r\n            listener(event);\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._removeListeners = function () {\r\n        if (!this._ws) {\r\n            return;\r\n        }\r\n        this._debug('removeListeners');\r\n        this._ws.removeEventListener('open', this._handleOpen);\r\n        this._ws.removeEventListener('close', this._handleClose);\r\n        this._ws.removeEventListener('message', this._handleMessage);\r\n        // @ts-ignore\r\n        this._ws.removeEventListener('error', this._handleError);\r\n    };\r\n    ReconnectingWebSocket.prototype._addListeners = function () {\r\n        if (!this._ws) {\r\n            return;\r\n        }\r\n        this._debug('addListeners');\r\n        this._ws.addEventListener('open', this._handleOpen);\r\n        this._ws.addEventListener('close', this._handleClose);\r\n        this._ws.addEventListener('message', this._handleMessage);\r\n        // @ts-ignore\r\n        this._ws.addEventListener('error', this._handleError);\r\n    };\r\n    ReconnectingWebSocket.prototype._clearTimeouts = function () {\r\n        clearTimeout(this._connectTimeout);\r\n        clearTimeout(this._uptimeTimeout);\r\n    };\r\n    return ReconnectingWebSocket;\r\n}());\n\nexport default ReconnectingWebSocket;\n","import load from \"external-load\";\nimport FieldSet from \"flarum/common/components/FieldSet\";\nimport Select from \"flarum/common/components/Select\";\nimport { extend } from \"flarum/common/extend\";\nimport ForumApplication from \"flarum/forum/ForumApplication\";\nimport app from \"flarum/forum/app\";\nimport SettingsPage from \"flarum/forum/components/SettingsPage\";\nimport ReconnectingWebSocket from \"reconnecting-websocket\";\n\nlet loaded = false;\nconst addResources = async () => {\n    if (loaded) {\n        return;\n    }\n\n    await load.css(\n        \"https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.css\"\n    );\n\n    await load.js(\n        \"https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.js\"\n    );\n\n    loaded = true;\n};\n\nconst radio = {\n    jpop: {\n        audioUrl: \"https://listen.moe/stream\",\n        wsUrl: \"wss://listen.moe/gateway_v2\",\n    },\n    kpop: {\n        audioUrl: \"https://listen.moe/kpop/stream\",\n        wsUrl: \"wss://listen.moe/kpop/gateway_v2\",\n    },\n};\n\nconst getCover = (fileName: string) => {\n    return `https://cdn.listen.moe/covers/${fileName}`;\n};\n\nconst websocket = (audioUrl: string, wsUrl) => {\n    let heartbeatInterval;\n\n    const heartbeat = (interval) => {\n        heartbeatInterval = setInterval(() => {\n            app.listenMoe.websocket.send(JSON.stringify({ op: 9 }));\n        }, interval);\n    };\n\n    app.listenMoe.websocket = new ReconnectingWebSocket(wsUrl, [], {\n        connectionTimeout: 5000,\n    });\n\n    app.listenMoe.websocket.onopen = () => {\n        clearInterval(heartbeatInterval);\n        heartbeatInterval = null;\n    };\n\n    app.listenMoe.websocket.onmessage = (message) => {\n        if (!message.data.length) {\n            return;\n        }\n\n        let response;\n\n        try {\n            response = JSON.parse(message.data);\n        } catch (error) {\n            return;\n        }\n\n        if (response.op === 0) {\n            app.listenMoe.websocket.send(JSON.stringify({ op: 9 }));\n            heartbeat(response.d.heartbeat);\n        }\n\n        if (response.op === 1) {\n            const valids = [\n                \"TRACK_UPDATE\",\n                \"TRACK_UPDATE_REQUEST\",\n                \"QUEUE_UPDATE\",\n                \"NOTIFICATION\",\n            ];\n\n            if (valids.indexOf(response.t) === -1) {\n                return;\n            }\n\n            const res = response.d;\n\n            const artists = res.song.artists.map((e) => e.name).join(\", \");\n            const albums = res.song.albums;\n            const cover =\n                albums.length > 0 && albums[0].image !== null\n                    ? getCover(albums[0].image)\n                    : app.forum.attribute(\"blankUrl\");\n            const sources = res.song.sources\n                .map((e) => e.nameRomaji)\n                .join(\", \");\n\n            const songTitle = res.song.title;\n            const artistsFinal = !!sources\n                ? `${artists} [${sources}]`\n                : artists;\n\n            document.body\n                .querySelector(\".aplayer-title\")\n                .setAttribute(\"title\", `${songTitle} ${artistsFinal}`);\n\n            const reload = () => {\n                app.listenMoe.player.list.add({\n                    name: songTitle,\n                    artist: artistsFinal,\n                    url: audioUrl,\n                    cover: cover,\n                });\n\n                app.listenMoe.player.list.switch(1);\n                app.listenMoe.player.list.remove(0);\n            };\n\n            reload();\n\n            app.listenMoe.player.on(\"pause\", () => {\n                // This way the seek is always synced with the API\n                reload();\n            });\n        }\n    };\n\n    app.listenMoe.websocket.onclose = () => {\n        clearInterval(heartbeatInterval);\n        heartbeatInterval = null;\n    };\n};\n\napp.initializers.add(\"nearata-listen-moe\", () => {\n    app.listenMoe = {};\n\n    extend(ForumApplication.prototype, \"mount\", function () {\n        const allowGuests = app.forum.attribute(\"listenMoeRadioGuests\");\n        const user = app.session.user;\n\n        if (!user && !allowGuests) {\n            return;\n        }\n\n        const key = !!user\n            ? user.preferences().listenMoeRadioType\n            : app.forum.attribute(\"listenMoeRadioType\");\n        const audioUrl = radio[key][\"audioUrl\"];\n        const wsUrl = radio[key][\"wsUrl\"];\n\n        addResources().then(() => {\n            const container = document.createElement(\"div\");\n            container.id = \"nearata-listen-moe\";\n\n            document.body.prepend(container);\n\n            app.listenMoe.player = new APlayer({\n                container: container,\n                fixed: true,\n                theme: \"#FF015B\",\n                loop: \"none\",\n                preload: \"metadata\",\n                volume: 0.5,\n                audio: {\n                    name: \"&nbsp;\",\n                    artist: \"&nbsp;\",\n                    url: audioUrl,\n                },\n            });\n\n            websocket(audioUrl, wsUrl);\n        });\n    });\n\n    extend(SettingsPage.prototype, \"settingsItems\", function (items) {\n        const user = app.session.user;\n        const currentRadio = user.preferences().listenMoeRadioType;\n\n        items.add(\n            \"listenMoeRadioType\",\n            m(\n                FieldSet,\n                {\n                    label: app.translator.trans(\n                        \"nearata-listen-moe.forum.settings.radio_label\"\n                    ),\n                    class: \"Settings-theme\",\n                },\n                [\n                    m(Select, {\n                        class: \"Settings-theme--input\",\n                        value: currentRadio,\n                        options: {\n                            jpop: app.translator.trans(\n                                \"nearata-listen-moe.forum.settings.radio_options.jpop\"\n                            ),\n                            kpop: app.translator.trans(\n                                \"nearata-listen-moe.forum.settings.radio_options.kpop\"\n                            ),\n                        },\n                        onchange: (value: string) => {\n                            user.savePreferences({\n                                listenMoeRadioType: value,\n                            }).then(() => location.reload());\n                        },\n                    }),\n                ]\n            )\n        );\n    });\n});\n"],"names":["_typeof","require","_regeneratorRuntime","module","exports","__esModule","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","undefined","done","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","get","prop","r","asyncGeneratorStep","gen","_next","_throw","_load","tag","url","element","document","createElement","parent","attr","onload","onerror","rel","appendChild","css","js","img","flarum","core","compat","extendStatics","b","Array","p","__extends","__","__read","m","e","ar","__spread","arguments","concat","Event","target","ErrorEvent","_super","_this","message","CloseEvent","code","reason","wasClean","getGlobalWebSocket","WebSocket","DEFAULT","maxReconnectionDelay","minReconnectionDelay","Math","random","minUptime","reconnectionDelayGrowFactor","connectionTimeout","maxRetries","Infinity","maxEnqueuedMessages","startClosed","debug","ReconnectingWebSocket","protocols","options","_listeners","open","close","_retryCount","_shouldReconnect","_connectLock","_binaryType","_closeCalled","_messageQueue","onclose","onmessage","onopen","_handleOpen","event","_debug","_a","_options","clearTimeout","_connectTimeout","_uptimeTimeout","setTimeout","_acceptOpen","_ws","binaryType","send","listener","_callEventListener","_handleMessage","_handleError","_disconnect","_connect","_handleClose","_clearTimeouts","_url","_protocols","CONNECTING","OPEN","CLOSING","CLOSED","set","max","reduce","acc","Blob","size","byteLength","bufferedAmount","extensions","protocol","readyState","reconnect","data","addEventListener","dispatchEvent","e_1","listeners","listeners_1","__values","listeners_1_1","e_1_1","removeEventListener","filter","l","args","_i","console","log","apply","_getNextDelay","_b","_c","_d","delay","pow","_wait","_getNextUrl","urlProvider","_removeListeners","w","_addListeners","_handleTimeout","handleEvent","loaded","addResources","load","radio","jpop","audioUrl","wsUrl","kpop","app","extend","ForumApplication","allowGuests","user","preferences","listenMoeRadioType","container","id","body","prepend","APlayer","fixed","theme","loop","preload","volume","audio","artist","heartbeatInterval","clearInterval","response","interval","JSON","parse","op","stringify","heartbeat","setInterval","indexOf","t","res","artists","song","map","join","albums","cover","image","sources","nameRomaji","songTitle","title","artistsFinal","querySelector","setAttribute","reload","websocket","SettingsPage","items","currentRadio","add","FieldSet","label","class","Select","onchange","savePreferences","location"],"sourceRoot":""}