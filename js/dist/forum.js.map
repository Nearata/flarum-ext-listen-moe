{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@nearata/flarum-ext-listen-moe/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@nearata/flarum-ext-listen-moe/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@nearata/flarum-ext-listen-moe/./node_modules/@babel/runtime/regenerator/index.js","webpack://@nearata/flarum-ext-listen-moe/webpack/bootstrap","webpack://@nearata/flarum-ext-listen-moe/webpack/runtime/compat get default export","webpack://@nearata/flarum-ext-listen-moe/webpack/runtime/define property getters","webpack://@nearata/flarum-ext-listen-moe/webpack/runtime/hasOwnProperty shorthand","webpack://@nearata/flarum-ext-listen-moe/webpack/runtime/make namespace object","webpack://@nearata/flarum-ext-listen-moe/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@nearata/flarum-ext-listen-moe/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['forum/app']\"","webpack://@nearata/flarum-ext-listen-moe/./node_modules/reconnecting-websocket/dist/reconnecting-websocket-mjs.js","webpack://@nearata/flarum-ext-listen-moe/./src/forum/States/WebsocketState.ts","webpack://@nearata/flarum-ext-listen-moe/./node_modules/external-load/index.js","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['common/Component']\"","webpack://@nearata/flarum-ext-listen-moe/./src/forum/components/Player.tsx","webpack://@nearata/flarum-ext-listen-moe/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['common/components/FieldSet']\"","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['common/components/Select']\"","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['common/extend']\"","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['forum/ForumApplication']\"","webpack://@nearata/flarum-ext-listen-moe/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@nearata/flarum-ext-listen-moe/./src/forum/index.tsx"],"sourcesContent":["var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function value(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\n\nvar Event = /** @class */ (function () {\r\n    function Event(type, target) {\r\n        this.target = target;\r\n        this.type = type;\r\n    }\r\n    return Event;\r\n}());\r\nvar ErrorEvent = /** @class */ (function (_super) {\r\n    __extends(ErrorEvent, _super);\r\n    function ErrorEvent(error, target) {\r\n        var _this = _super.call(this, 'error', target) || this;\r\n        _this.message = error.message;\r\n        _this.error = error;\r\n        return _this;\r\n    }\r\n    return ErrorEvent;\r\n}(Event));\r\nvar CloseEvent = /** @class */ (function (_super) {\r\n    __extends(CloseEvent, _super);\r\n    function CloseEvent(code, reason, target) {\r\n        if (code === void 0) { code = 1000; }\r\n        if (reason === void 0) { reason = ''; }\r\n        var _this = _super.call(this, 'close', target) || this;\r\n        _this.wasClean = true;\r\n        _this.code = code;\r\n        _this.reason = reason;\r\n        return _this;\r\n    }\r\n    return CloseEvent;\r\n}(Event));\n\n/*!\r\n * Reconnecting WebSocket\r\n * by Pedro Ladaria <pedro.ladaria@gmail.com>\r\n * https://github.com/pladaria/reconnecting-websocket\r\n * License MIT\r\n */\r\nvar getGlobalWebSocket = function () {\r\n    if (typeof WebSocket !== 'undefined') {\r\n        // @ts-ignore\r\n        return WebSocket;\r\n    }\r\n};\r\n/**\r\n * Returns true if given argument looks like a WebSocket class\r\n */\r\nvar isWebSocket = function (w) { return typeof w !== 'undefined' && !!w && w.CLOSING === 2; };\r\nvar DEFAULT = {\r\n    maxReconnectionDelay: 10000,\r\n    minReconnectionDelay: 1000 + Math.random() * 4000,\r\n    minUptime: 5000,\r\n    reconnectionDelayGrowFactor: 1.3,\r\n    connectionTimeout: 4000,\r\n    maxRetries: Infinity,\r\n    maxEnqueuedMessages: Infinity,\r\n    startClosed: false,\r\n    debug: false,\r\n};\r\nvar ReconnectingWebSocket = /** @class */ (function () {\r\n    function ReconnectingWebSocket(url, protocols, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        this._listeners = {\r\n            error: [],\r\n            message: [],\r\n            open: [],\r\n            close: [],\r\n        };\r\n        this._retryCount = -1;\r\n        this._shouldReconnect = true;\r\n        this._connectLock = false;\r\n        this._binaryType = 'blob';\r\n        this._closeCalled = false;\r\n        this._messageQueue = [];\r\n        /**\r\n         * An event listener to be called when the WebSocket connection's readyState changes to CLOSED\r\n         */\r\n        this.onclose = null;\r\n        /**\r\n         * An event listener to be called when an error occurs\r\n         */\r\n        this.onerror = null;\r\n        /**\r\n         * An event listener to be called when a message is received from the server\r\n         */\r\n        this.onmessage = null;\r\n        /**\r\n         * An event listener to be called when the WebSocket connection's readyState changes to OPEN;\r\n         * this indicates that the connection is ready to send and receive data\r\n         */\r\n        this.onopen = null;\r\n        this._handleOpen = function (event) {\r\n            _this._debug('open event');\r\n            var _a = _this._options.minUptime, minUptime = _a === void 0 ? DEFAULT.minUptime : _a;\r\n            clearTimeout(_this._connectTimeout);\r\n            _this._uptimeTimeout = setTimeout(function () { return _this._acceptOpen(); }, minUptime);\r\n            _this._ws.binaryType = _this._binaryType;\r\n            // send enqueued messages (messages sent before websocket open event)\r\n            _this._messageQueue.forEach(function (message) { return _this._ws.send(message); });\r\n            _this._messageQueue = [];\r\n            if (_this.onopen) {\r\n                _this.onopen(event);\r\n            }\r\n            _this._listeners.open.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n        };\r\n        this._handleMessage = function (event) {\r\n            _this._debug('message event');\r\n            if (_this.onmessage) {\r\n                _this.onmessage(event);\r\n            }\r\n            _this._listeners.message.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n        };\r\n        this._handleError = function (event) {\r\n            _this._debug('error event', event.message);\r\n            _this._disconnect(undefined, event.message === 'TIMEOUT' ? 'timeout' : undefined);\r\n            if (_this.onerror) {\r\n                _this.onerror(event);\r\n            }\r\n            _this._debug('exec error listeners');\r\n            _this._listeners.error.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n            _this._connect();\r\n        };\r\n        this._handleClose = function (event) {\r\n            _this._debug('close event');\r\n            _this._clearTimeouts();\r\n            if (_this._shouldReconnect) {\r\n                _this._connect();\r\n            }\r\n            if (_this.onclose) {\r\n                _this.onclose(event);\r\n            }\r\n            _this._listeners.close.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n        };\r\n        this._url = url;\r\n        this._protocols = protocols;\r\n        this._options = options;\r\n        if (this._options.startClosed) {\r\n            this._shouldReconnect = false;\r\n        }\r\n        this._connect();\r\n    }\r\n    Object.defineProperty(ReconnectingWebSocket, \"CONNECTING\", {\r\n        get: function () {\r\n            return 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket, \"OPEN\", {\r\n        get: function () {\r\n            return 1;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket, \"CLOSING\", {\r\n        get: function () {\r\n            return 2;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket, \"CLOSED\", {\r\n        get: function () {\r\n            return 3;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"CONNECTING\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.CONNECTING;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"OPEN\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.OPEN;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"CLOSING\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.CLOSING;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"CLOSED\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.CLOSED;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"binaryType\", {\r\n        get: function () {\r\n            return this._ws ? this._ws.binaryType : this._binaryType;\r\n        },\r\n        set: function (value) {\r\n            this._binaryType = value;\r\n            if (this._ws) {\r\n                this._ws.binaryType = value;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"retryCount\", {\r\n        /**\r\n         * Returns the number or connection retries\r\n         */\r\n        get: function () {\r\n            return Math.max(this._retryCount, 0);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"bufferedAmount\", {\r\n        /**\r\n         * The number of bytes of data that have been queued using calls to send() but not yet\r\n         * transmitted to the network. This value resets to zero once all queued data has been sent.\r\n         * This value does not reset to zero when the connection is closed; if you keep calling send(),\r\n         * this will continue to climb. Read only\r\n         */\r\n        get: function () {\r\n            var bytes = this._messageQueue.reduce(function (acc, message) {\r\n                if (typeof message === 'string') {\r\n                    acc += message.length; // not byte size\r\n                }\r\n                else if (message instanceof Blob) {\r\n                    acc += message.size;\r\n                }\r\n                else {\r\n                    acc += message.byteLength;\r\n                }\r\n                return acc;\r\n            }, 0);\r\n            return bytes + (this._ws ? this._ws.bufferedAmount : 0);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"extensions\", {\r\n        /**\r\n         * The extensions selected by the server. This is currently only the empty string or a list of\r\n         * extensions as negotiated by the connection\r\n         */\r\n        get: function () {\r\n            return this._ws ? this._ws.extensions : '';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"protocol\", {\r\n        /**\r\n         * A string indicating the name of the sub-protocol the server selected;\r\n         * this will be one of the strings specified in the protocols parameter when creating the\r\n         * WebSocket object\r\n         */\r\n        get: function () {\r\n            return this._ws ? this._ws.protocol : '';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"readyState\", {\r\n        /**\r\n         * The current state of the connection; this is one of the Ready state constants\r\n         */\r\n        get: function () {\r\n            if (this._ws) {\r\n                return this._ws.readyState;\r\n            }\r\n            return this._options.startClosed\r\n                ? ReconnectingWebSocket.CLOSED\r\n                : ReconnectingWebSocket.CONNECTING;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"url\", {\r\n        /**\r\n         * The URL as resolved by the constructor\r\n         */\r\n        get: function () {\r\n            return this._ws ? this._ws.url : '';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Closes the WebSocket connection or connection attempt, if any. If the connection is already\r\n     * CLOSED, this method does nothing\r\n     */\r\n    ReconnectingWebSocket.prototype.close = function (code, reason) {\r\n        if (code === void 0) { code = 1000; }\r\n        this._closeCalled = true;\r\n        this._shouldReconnect = false;\r\n        this._clearTimeouts();\r\n        if (!this._ws) {\r\n            this._debug('close enqueued: no ws instance');\r\n            return;\r\n        }\r\n        if (this._ws.readyState === this.CLOSED) {\r\n            this._debug('close: already closed');\r\n            return;\r\n        }\r\n        this._ws.close(code, reason);\r\n    };\r\n    /**\r\n     * Closes the WebSocket connection or connection attempt and connects again.\r\n     * Resets retry counter;\r\n     */\r\n    ReconnectingWebSocket.prototype.reconnect = function (code, reason) {\r\n        this._shouldReconnect = true;\r\n        this._closeCalled = false;\r\n        this._retryCount = -1;\r\n        if (!this._ws || this._ws.readyState === this.CLOSED) {\r\n            this._connect();\r\n        }\r\n        else {\r\n            this._disconnect(code, reason);\r\n            this._connect();\r\n        }\r\n    };\r\n    /**\r\n     * Enqueue specified data to be transmitted to the server over the WebSocket connection\r\n     */\r\n    ReconnectingWebSocket.prototype.send = function (data) {\r\n        if (this._ws && this._ws.readyState === this.OPEN) {\r\n            this._debug('send', data);\r\n            this._ws.send(data);\r\n        }\r\n        else {\r\n            var _a = this._options.maxEnqueuedMessages, maxEnqueuedMessages = _a === void 0 ? DEFAULT.maxEnqueuedMessages : _a;\r\n            if (this._messageQueue.length < maxEnqueuedMessages) {\r\n                this._debug('enqueue', data);\r\n                this._messageQueue.push(data);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Register an event handler of a specific event type\r\n     */\r\n    ReconnectingWebSocket.prototype.addEventListener = function (type, listener) {\r\n        if (this._listeners[type]) {\r\n            // @ts-ignore\r\n            this._listeners[type].push(listener);\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype.dispatchEvent = function (event) {\r\n        var e_1, _a;\r\n        var listeners = this._listeners[event.type];\r\n        if (listeners) {\r\n            try {\r\n                for (var listeners_1 = __values(listeners), listeners_1_1 = listeners_1.next(); !listeners_1_1.done; listeners_1_1 = listeners_1.next()) {\r\n                    var listener = listeners_1_1.value;\r\n                    this._callEventListener(event, listener);\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (listeners_1_1 && !listeners_1_1.done && (_a = listeners_1.return)) _a.call(listeners_1);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * Removes an event listener\r\n     */\r\n    ReconnectingWebSocket.prototype.removeEventListener = function (type, listener) {\r\n        if (this._listeners[type]) {\r\n            // @ts-ignore\r\n            this._listeners[type] = this._listeners[type].filter(function (l) { return l !== listener; });\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._debug = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (this._options.debug) {\r\n            // not using spread because compiled version uses Symbols\r\n            // tslint:disable-next-line\r\n            console.log.apply(console, __spread(['RWS>'], args));\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._getNextDelay = function () {\r\n        var _a = this._options, _b = _a.reconnectionDelayGrowFactor, reconnectionDelayGrowFactor = _b === void 0 ? DEFAULT.reconnectionDelayGrowFactor : _b, _c = _a.minReconnectionDelay, minReconnectionDelay = _c === void 0 ? DEFAULT.minReconnectionDelay : _c, _d = _a.maxReconnectionDelay, maxReconnectionDelay = _d === void 0 ? DEFAULT.maxReconnectionDelay : _d;\r\n        var delay = 0;\r\n        if (this._retryCount > 0) {\r\n            delay =\r\n                minReconnectionDelay * Math.pow(reconnectionDelayGrowFactor, this._retryCount - 1);\r\n            if (delay > maxReconnectionDelay) {\r\n                delay = maxReconnectionDelay;\r\n            }\r\n        }\r\n        this._debug('next delay', delay);\r\n        return delay;\r\n    };\r\n    ReconnectingWebSocket.prototype._wait = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            setTimeout(resolve, _this._getNextDelay());\r\n        });\r\n    };\r\n    ReconnectingWebSocket.prototype._getNextUrl = function (urlProvider) {\r\n        if (typeof urlProvider === 'string') {\r\n            return Promise.resolve(urlProvider);\r\n        }\r\n        if (typeof urlProvider === 'function') {\r\n            var url = urlProvider();\r\n            if (typeof url === 'string') {\r\n                return Promise.resolve(url);\r\n            }\r\n            if (!!url.then) {\r\n                return url;\r\n            }\r\n        }\r\n        throw Error('Invalid URL');\r\n    };\r\n    ReconnectingWebSocket.prototype._connect = function () {\r\n        var _this = this;\r\n        if (this._connectLock || !this._shouldReconnect) {\r\n            return;\r\n        }\r\n        this._connectLock = true;\r\n        var _a = this._options, _b = _a.maxRetries, maxRetries = _b === void 0 ? DEFAULT.maxRetries : _b, _c = _a.connectionTimeout, connectionTimeout = _c === void 0 ? DEFAULT.connectionTimeout : _c, _d = _a.WebSocket, WebSocket = _d === void 0 ? getGlobalWebSocket() : _d;\r\n        if (this._retryCount >= maxRetries) {\r\n            this._debug('max retries reached', this._retryCount, '>=', maxRetries);\r\n            return;\r\n        }\r\n        this._retryCount++;\r\n        this._debug('connect', this._retryCount);\r\n        this._removeListeners();\r\n        if (!isWebSocket(WebSocket)) {\r\n            throw Error('No valid WebSocket class provided');\r\n        }\r\n        this._wait()\r\n            .then(function () { return _this._getNextUrl(_this._url); })\r\n            .then(function (url) {\r\n            // close could be called before creating the ws\r\n            if (_this._closeCalled) {\r\n                return;\r\n            }\r\n            _this._debug('connect', { url: url, protocols: _this._protocols });\r\n            _this._ws = _this._protocols\r\n                ? new WebSocket(url, _this._protocols)\r\n                : new WebSocket(url);\r\n            _this._ws.binaryType = _this._binaryType;\r\n            _this._connectLock = false;\r\n            _this._addListeners();\r\n            _this._connectTimeout = setTimeout(function () { return _this._handleTimeout(); }, connectionTimeout);\r\n        });\r\n    };\r\n    ReconnectingWebSocket.prototype._handleTimeout = function () {\r\n        this._debug('timeout event');\r\n        this._handleError(new ErrorEvent(Error('TIMEOUT'), this));\r\n    };\r\n    ReconnectingWebSocket.prototype._disconnect = function (code, reason) {\r\n        if (code === void 0) { code = 1000; }\r\n        this._clearTimeouts();\r\n        if (!this._ws) {\r\n            return;\r\n        }\r\n        this._removeListeners();\r\n        try {\r\n            this._ws.close(code, reason);\r\n            this._handleClose(new CloseEvent(code, reason, this));\r\n        }\r\n        catch (error) {\r\n            // ignore\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._acceptOpen = function () {\r\n        this._debug('accept open');\r\n        this._retryCount = 0;\r\n    };\r\n    ReconnectingWebSocket.prototype._callEventListener = function (event, listener) {\r\n        if ('handleEvent' in listener) {\r\n            // @ts-ignore\r\n            listener.handleEvent(event);\r\n        }\r\n        else {\r\n            // @ts-ignore\r\n            listener(event);\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._removeListeners = function () {\r\n        if (!this._ws) {\r\n            return;\r\n        }\r\n        this._debug('removeListeners');\r\n        this._ws.removeEventListener('open', this._handleOpen);\r\n        this._ws.removeEventListener('close', this._handleClose);\r\n        this._ws.removeEventListener('message', this._handleMessage);\r\n        // @ts-ignore\r\n        this._ws.removeEventListener('error', this._handleError);\r\n    };\r\n    ReconnectingWebSocket.prototype._addListeners = function () {\r\n        if (!this._ws) {\r\n            return;\r\n        }\r\n        this._debug('addListeners');\r\n        this._ws.addEventListener('open', this._handleOpen);\r\n        this._ws.addEventListener('close', this._handleClose);\r\n        this._ws.addEventListener('message', this._handleMessage);\r\n        // @ts-ignore\r\n        this._ws.addEventListener('error', this._handleError);\r\n    };\r\n    ReconnectingWebSocket.prototype._clearTimeouts = function () {\r\n        clearTimeout(this._connectTimeout);\r\n        clearTimeout(this._uptimeTimeout);\r\n    };\r\n    return ReconnectingWebSocket;\r\n}());\n\nexport default ReconnectingWebSocket;\n","import app from \"flarum/forum/app\";\nimport ReconnectingWebSocket, {\n    CloseEvent,\n    ErrorEvent,\n    Event,\n} from \"reconnecting-websocket\";\n\ntype State = {\n    connected: boolean;\n    message: string | null;\n};\n\nexport default class WebsocketState {\n    player: any;\n    heartbeatInterval: NodeJS.Timer | null;\n    socket: ReconnectingWebSocket;\n    state: State;\n\n    constructor(player: any, url: string) {\n        this.player = player;\n\n        this.heartbeatInterval = null;\n        this.socket = new ReconnectingWebSocket(url, [], {\n            connectionTimeout: 5000,\n        });\n        this.state = {\n            connected: false,\n            message: null,\n        };\n        this.socket.onopen = this.onOpen.bind(this);\n        this.socket.onmessage = this.onMessage.bind(this);\n        this.socket.onclose = this.onClose.bind(this);\n        this.socket.onerror = this.onError.bind(this);\n    }\n\n    onOpen(event: Event) {\n        clearInterval(this.heartbeatInterval!);\n\n        this.heartbeatInterval = null;\n        this.state.connected = true;\n\n        m.redraw();\n    }\n\n    onMessage(event: MessageEvent<any>) {\n        if (!event.data.length) {\n            return;\n        }\n\n        this.state.message = event.data;\n\n        let response;\n\n        try {\n            response = JSON.parse(event.data);\n        } catch (error) {}\n\n        if (response.op === 0) {\n            this.sendMessage(JSON.stringify({ op: 9 }));\n            this.setHeartbeatInterval(response.d.heartbeat);\n        }\n\n        if (response.op === 1) {\n            const valids = [\n                \"TRACK_UPDATE\",\n                \"TRACK_UPDATE_REQUEST\",\n                \"QUEUE_UPDATE\",\n                \"NOTIFICATION\",\n            ];\n\n            if (valids.indexOf(response.t) === -1) {\n                return;\n            }\n\n            const res = response.d;\n\n            const artists = res.song.artists.map((e: any) => e.name).join(\", \");\n            const albums = res.song.albums;\n            const cover =\n                albums.length > 0 && albums[0].image !== null\n                    ? this.getCover(albums[0].image)\n                    : app.forum.attribute(\"listenMoeBlankUrl\");\n            const sources = res.song.sources\n                .map((e: any) => e.nameRomaji)\n                .join(\", \");\n\n            const songTitle = res.song.title;\n            const artistsFinal = !!sources\n                ? `${artists} [${sources}]`\n                : artists;\n\n            const reload = () => {\n                this.player.list.add({\n                    name: songTitle,\n                    artist: artistsFinal,\n                    url: this.player.audio.src,\n                    cover: cover,\n                });\n\n                this.player.list.switch(1);\n                this.player.list.remove(0);\n            };\n\n            reload();\n\n            this.player.on(\"pause\", () => {\n                // This way the seek is always synced with the API\n                reload();\n            });\n        }\n\n        m.redraw();\n    }\n\n    onClose(event: CloseEvent) {\n        clearInterval(this.heartbeatInterval!);\n\n        this.heartbeatInterval = null;\n        this.state.connected = false;\n\n        m.redraw();\n    }\n\n    onError(event: ErrorEvent) {\n        console.log(\"[nearata-listen-mow] WebSocket error:\", event);\n    }\n\n    sendMessage(message: any) {\n        this.socket.send(message);\n    }\n\n    close() {\n        this.socket.close();\n    }\n\n    setHeartbeatInterval(interval: number) {\n        this.heartbeatInterval = setInterval(() => {\n            this.sendMessage(JSON.stringify({ op: 9 }));\n        }, interval);\n    }\n\n    getCover(fileName: string): string {\n        return `https://cdn.listen.moe/covers/${fileName}`;\n    }\n}\n","/**\n * Simple resource loader based on David Walsh's tutorial\n * https://davidwalsh.name/javascript-loader\n * https://davidwalsh.name/javascript-functions\n */\nexport default (function() {\n    // Function which returns a function\n    function _load(tag) {\n        return function(url) {\n            // This promise will be used by Promise.all to determine success or failure\n            return new Promise(function(resolve, reject) {\n                var element = document.createElement(tag);\n                var parent = \"body\";\n                var attr = \"src\";\n\n                // Important success and error for the promise\n                element.onload = function() {\n                    resolve(url);\n                };\n                element.onerror = function() {\n                    reject(url);\n                };\n\n                // Need to set different attributes depending on tag type\n                switch (tag) {\n                    case \"script\":\n                        element.async = true;\n                        break;\n                    case \"link\":\n                        element.type = \"text/css\";\n                        element.rel = \"stylesheet\";\n                        attr = \"href\";\n                        parent = \"head\";\n                }\n\n                // Inject into document to kick off loading\n                element[attr] = url;\n                document[parent].appendChild(element);\n            });\n        };\n    }\n\n    return {\n        css: _load(\"link\"),\n        js: _load(\"script\"),\n        img: _load(\"img\")\n    };\n})();\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import WebsocketState from \"../States/WebsocketState\";\nimport load from \"external-load\";\nimport Component from \"flarum/common/Component\";\nimport app from \"flarum/forum/app\";\nimport type Mithril from \"mithril\";\n\nlet loaded = false;\nconst addResources = async () => {\n    if (loaded) {\n        return;\n    }\n\n    await load.css(\n        \"https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.css\"\n    );\n\n    await load.js(\n        \"https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.js\"\n    );\n\n    loaded = true;\n};\n\nexport default class Player extends Component {\n    radio: any;\n\n    constructor() {\n        super();\n\n        this.radio = {\n            jpop: {\n                audioUrl: \"https://listen.moe/stream\",\n                wsUrl: \"wss://listen.moe/gateway_v2\",\n            },\n            kpop: {\n                audioUrl: \"https://listen.moe/kpop/stream\",\n                wsUrl: \"wss://listen.moe/kpop/gateway_v2\",\n            },\n        };\n    }\n\n    oncreate(vnode: Mithril.VnodeDOM): void {\n        super.oncreate(vnode);\n\n        const allowGuests = app.forum.attribute(\"listenMoeRadioGuests\");\n        const user = app.session.user;\n\n        if (!user && !allowGuests) {\n            return;\n        }\n\n        const key: string = !!user\n            ? user.preferences()!.listenMoeRadioType\n            : app.forum.attribute(\"listenMoeRadioType\");\n        const audioUrl = this.radio[key][\"audioUrl\"];\n        const wsUrl = this.radio[key][\"wsUrl\"];\n\n        addResources().then(() => {\n            const player = new APlayer({\n                container: this.element,\n                fixed: true,\n                theme: \"#FF015B\",\n                loop: \"none\",\n                preload: \"metadata\",\n                volume: 0.5,\n                audio: {\n                    name: \"&nbsp;\",\n                    artist: \"&nbsp;\",\n                    url: audioUrl,\n                },\n            });\n\n            new WebsocketState(player, wsUrl);\n        });\n    }\n\n    view(vnode: Mithril.VnodeDOM) {\n        return <div id=\"nearata-listen-moe\" />;\n    }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/FieldSet'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/ForumApplication'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SettingsPage'];","import Player from \"./components/Player\";\nimport FieldSet from \"flarum/common/components/FieldSet\";\nimport Select from \"flarum/common/components/Select\";\nimport { extend } from \"flarum/common/extend\";\nimport ForumApplication from \"flarum/forum/ForumApplication\";\nimport app from \"flarum/forum/app\";\nimport SettingsPage from \"flarum/forum/components/SettingsPage\";\n\napp.initializers.add(\"nearata-listen-moe\", () => {\n    extend(ForumApplication.prototype, \"mount\", function () {\n        const element = document.createElement(\"div\");\n\n        document.body.append(element);\n\n        m.mount(element, Player);\n    });\n\n    extend(SettingsPage.prototype, \"settingsItems\", function (items) {\n        const user = app.session.user;\n\n        if (!user) {\n            return;\n        }\n\n        const currentRadio = user.preferences()!.listenMoeRadioType;\n\n        const options = {\n            jpop: app.translator.trans(\n                \"nearata-listen-moe.forum.settings.radio_options.jpop\"\n            ),\n            kpop: app.translator.trans(\n                \"nearata-listen-moe.forum.settings.radio_options.kpop\"\n            ),\n        };\n\n        items.add(\n            \"listenMoeRadioType\",\n            <FieldSet\n                class=\"Settings-theme\"\n                label={app.translator.trans(\n                    \"nearata-listen-moe.forum.settings.radio_label\"\n                )}\n            >\n                <Select\n                    class=\"Settings-theme--input\"\n                    value={currentRadio}\n                    options={options}\n                    onchange={(value: string) => {\n                        user.savePreferences({\n                            listenMoeRadioType: value,\n                        }).then(() => location.reload());\n                    }}\n                />\n            </FieldSet>\n        );\n    });\n});\n"],"names":["_typeof","require","_regeneratorRuntime","module","exports","__esModule","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","undefined","done","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","get","prop","r","_setPrototypeOf","p","bind","asyncGeneratorStep","gen","_next","_throw","flarum","core","compat","extendStatics","b","Array","__extends","__","__read","m","e","ar","__spread","arguments","concat","Event","target","ErrorEvent","_super","_this","message","CloseEvent","code","reason","wasClean","getGlobalWebSocket","WebSocket","DEFAULT","maxReconnectionDelay","minReconnectionDelay","Math","random","minUptime","reconnectionDelayGrowFactor","connectionTimeout","maxRetries","Infinity","maxEnqueuedMessages","startClosed","debug","ReconnectingWebSocket","url","protocols","options","_listeners","open","close","_retryCount","_shouldReconnect","_connectLock","_binaryType","_closeCalled","_messageQueue","onclose","onerror","onmessage","onopen","_handleOpen","event","_debug","_a","_options","clearTimeout","_connectTimeout","_uptimeTimeout","setTimeout","_acceptOpen","_ws","binaryType","send","listener","_callEventListener","_handleMessage","_handleError","_disconnect","_connect","_handleClose","_clearTimeouts","_url","_protocols","CONNECTING","OPEN","CLOSING","CLOSED","set","max","reduce","acc","Blob","size","byteLength","bufferedAmount","extensions","protocol","readyState","reconnect","data","addEventListener","dispatchEvent","e_1","listeners","listeners_1","__values","listeners_1_1","e_1_1","removeEventListener","filter","l","args","_i","console","log","apply","_getNextDelay","_b","_c","_d","delay","pow","_wait","_getNextUrl","urlProvider","_removeListeners","w","_addListeners","_handleTimeout","handleEvent","WebsocketState","player","heartbeatInterval","socket","connected","onOpen","onMessage","onClose","onError","clearInterval","redraw","response","JSON","parse","op","sendMessage","stringify","setHeartbeatInterval","heartbeat","indexOf","t","res","artists","song","map","join","albums","cover","image","getCover","app","sources","nameRomaji","songTitle","title","artistsFinal","reload","list","add","artist","audio","src","remove","on","interval","setInterval","fileName","_load","tag","element","document","createElement","parent","attr","onload","rel","appendChild","css","js","img","loaded","addResources","load","Player","subClass","superClass","radio","jpop","audioUrl","wsUrl","kpop","oncreate","vnode","allowGuests","user","preferences","listenMoeRadioType","APlayer","container","fixed","theme","loop","preload","volume","view","id","Component","extend","ForumApplication","body","append","mount","SettingsPage","items","currentRadio","class","label","onchange","savePreferences","location"],"sourceRoot":""}